/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-upgrade-interactive-filter",
factory: function (require) {
"use strict";var plugin=(()=>{var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var f=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var P=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},g=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of l(e))!h.call(t,s)&&s!==r&&p(t,s,{get:()=>e[s],enumerable:!(i=u(e,s))||i.enumerable});return t};var k=t=>g(p({},"__esModule",{value:!0}),t);var x={};P(x,{default:()=>j});var d=f("@yarnpkg/plugin-interactive-tools"),m=f("clipanion"),n=f("@yarnpkg/core"),c=class extends d.UpgradeInteractiveCommand{workspaces=m.Option.Rest({required:1});static paths=[["upgrade-interactive-filter"]];async execute(){if(!this.workspaces||this.workspaces.length===0)return super.execute();let e=n.Project.find;n.Project.find=async(r,i)=>{let{project:s,...o}=await e.call(n.Project,r,i),a=this.createFilteredProject(s,this.workspaces);return{...o,project:a}};try{return await super.execute()}finally{n.Project.find=e}}createFilteredProject(e,r){if(!r)return e;let i=new Set(r.map(o=>n.structUtils.parseIdent(o).identHash)),s=[];for(let o of e.workspaces){let a=o.manifest.name?.identHash;a&&i.has(a)&&s.push(o)}return console.log("filtered workspaces:",s.map(o=>n.structUtils.stringifyIdent(o.manifest.name))),new Proxy(e,{get(o,a){return a==="workspaces"?s:o[a]}})}};var w={commands:[c]},j=w;return k(x);})();
return plugin;
}
};
